<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ç”µå­ä¹¦åº“</title>
<style>
  /* å…¨å±€ */
  body {
    background: #111;
    color: #0f0;
    font-family: monospace;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    width: 100vw;
  }

  h1, h2 {
    text-align: center;
    margin: 10px 0;
  }

  /* è¿”å›é¦–é¡µæŒ‰é’® */
  #back-btn {
    margin: 10px;
    padding: 12px 20px;
    font-size: 1.2em;
    background: #111;
    color: #0f0;
    border: 2px solid #0f0;
    border-radius: 8px;
    cursor: pointer;
  }
  #back-btn:hover {
    background: #0f0;
    color: #111;
  }

  /* å½©è™¹ä¹¦å */
  .rainbow-text {
    font-size: 2em;
    font-weight: bold;
    background: linear-gradient(90deg, red, orange, yellow, green, cyan, blue, violet);
    -webkit-background-clip: text;
    color: transparent;
    margin: 10px 0;
  }

  /* ä¹¦ç±åˆ—è¡¨æŒ‰é’® */
  #books-list button {
    width: 90%;
    max-width: 400px;
    font-size: 1.2em;
    padding: 14px 0;
    margin: 8px 0;
    background: #0f0;
    color: #111;
    border: none;
    border-radius: 10px;
    cursor: pointer;
  }
  #books-list button:hover {
    background: #0c0;
  }

  /* ä¹¦ç±ä»‹ç»åŒº */
  #book-intro {
    display: none;
    width: 90%;
    max-width: 420px;
    background: #222;
    border: 2px solid #0f0;
    border-radius: 12px;
    padding: 20px;
    margin-top: 15px;
  }

  #book-intro p {
    font-size: 1.2em;
    line-height: 1.6;
    margin-bottom: 15px;
  }

  #book-intro button {
    width: 100%;
    padding: 12px 0;
    margin: 8px 0;
    font-size: 1.2em;
    background: #0f0;
    color: #111;
    border: none;
    border-radius: 10px;
    cursor: pointer;
  }
  #book-intro button:hover {
    background: #0c0;
  }

  /* ç« èŠ‚åˆ—è¡¨ */
  #chapter-list li {
    list-style: none;
    margin: 6px 0;
  }
  #chapter-list li button {
    width: 100%;
    font-size: 1.1em;
    padding: 10px 0;
    border-radius: 8px;
  }

  /* å“åº”å¼è°ƒæ•´ï¼šå°å±å¹•å­—ä½“ç¨å¾®è°ƒå¤§ */
  @media (max-width: 420px) {
    .rainbow-text { font-size: 1.6em; }
    #books-list button { font-size: 1.1em; padding: 12px 0; }
    #book-intro p { font-size: 1.1em; }
    #book-intro button { font-size: 1.1em; padding: 10px 0; }
  }
</style>
</head>
<body>

<button id="back-btn" onclick="window.location.href='books.html'">â¬… è¿”å›é¦–é¡µ</button>

<h1>ğŸ“š ç›®å½•</h1>
<div class="book-title-container">
    <h1 class="rainbow-text">ğŸ“– 21ä¸–çºªçš„21å ‚è¯¾</h1>
</div>
<div id="books-list"></div>

<!-- ä¹¦ç±ä»‹ç»å’Œç« èŠ‚ç›®å½• -->
<div id="book-intro">
  <h2 id="book-title"></h2>
  <p id="book-description"></p>

  <audio id="introAudio"></audio>
  <button onclick="toggleAudio()">ğŸ”Š æ’­æ”¾/æš‚åœæœ—è¯»</button>

  <ol id="chapter-list"></ol>
  <button onclick="closeIntro()">å…³é—­ä»‹ç»</button>
</div>

<script>
let audio = null;

const books = [
  {
    id: 'book1',
    title: 'è¯·ç‚¹å‡»ä¸‹æ–¹ç« èŠ‚å¼€å§‹é˜…è¯»',
    description: `å°¤ç“¦å°”Â·èµ«æ‹‰åˆ©ï¼ˆYuval Noah Harariï¼‰å†™çš„ç¤¾ä¼šä¸æœªæ¥è¶‹åŠ¿ä¹¦ç±ã€‚ ...`,
    chapters: [
      'äººå·¥æ™ºèƒ½ä¸å·¥ä½œ','ç”Ÿç‰©ç§‘æŠ€ä¸æœªæ¥èº«ä½“','æ•°æ®ä¸éšç§','ç½‘ç»œå®‰å…¨ä¸æ”¿æ²»æ“æ§',
      'ææ€–ä¸»ä¹‰ä¸å®‰å…¨','æ°‘ä¸»ä¸æ°‘æ—ä¸»ä¹‰','æ•™è‚²ä¸æŠ€èƒ½åŸ¹å…»','è‡ªç”±ä¸ç®—æ³•å†³å®š',
      'ä¸–ç•Œç§©åº','æ„ä¹‰ä¸å®—æ•™','å¹¸ç¦ä¸å¿ƒç†å¥åº·','æ•™è‚²çš„é‡è¦æ€§','æ„è¯†ä¸è‡ªæˆ‘è®¤çŸ¥',
      'æ•…äº‹ä¸ä»·å€¼è§‚','ç¯å¢ƒä¸æ°”å€™å˜åŒ–','æ ¸æ­¦å™¨ä¸æˆ˜äº‰','ç§»æ°‘ä¸äººå£æµåŠ¨',
      'å…¨çƒåˆä½œä¸æ²»ç†','äººå·¥æ™ºèƒ½ä¸ä¸å¹³ç­‰','äººç±»æœªæ¥çš„ä¼¦ç†','é¢å¯¹ä¸ç¡®å®šæ€§'
    ]
  }
];

// æ¸²æŸ“ä¹¦ç±åˆ—è¡¨
const booksListDiv = document.getElementById('books-list');
books.forEach(book=>{
  const btn = document.createElement('button');
  btn.textContent = book.title;
  btn.onclick = () => showIntro(book);
  booksListDiv.appendChild(btn);
});

// æ˜¾ç¤ºä¹¦ç±ä»‹ç»å’Œç« èŠ‚
function showIntro(book){
  document.getElementById('book-intro').style.display = 'block';
  document.getElementById('book-title').textContent = book.title;
  document.getElementById('book-description').textContent = book.description;

  const chapterList = document.getElementById('chapter-list');
  chapterList.innerHTML = '';
  book.chapters.forEach((chapter,i)=>{
    const li = document.createElement('li');
    const btn = document.createElement('button');
    btn.textContent = chapter;
    btn.onclick = ()=> goToChapter(book.id, i+1);
    li.appendChild(btn);
    chapterList.appendChild(li);
  });

  if(audio){ audio.pause(); audio = null; }
  audio = new Audio(`assets/${book.id}/zh/chapter1.mp3`);
}

function closeIntro(){
  document.getElementById('book-intro').style.display = 'none';
  if(audio){ audio.pause(); audio=null; }
}

function toggleAudio(){
  if(audio){ audio.paused ? audio.play() : audio.pause(); }
}

function goToChapter(bookId, chapterNum){
  window.location.href = `reader.html?book=${bookId}&chapter=${chapterNum}&lang=zh`;
}
</script>
</body>
</html>
