<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>电子书库</title>
<style>
  /* 全局 */
  body {
    background: #111;
    color: #0f0;
    font-family: monospace;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    width: 100vw;
  }

  h1, h2 {
    text-align: center;
    margin: 10px 0;
  }

  /* 返回首页按钮 */
  #back-btn {
    margin: 10px;
    padding: 12px 20px;
    font-size: 1.2em;
    background: #111;
    color: #0f0;
    border: 2px solid #0f0;
    border-radius: 8px;
    cursor: pointer;
  }
  #back-btn:hover {
    background: #0f0;
    color: #111;
  }

  /* 彩虹书名 */
  .rainbow-text {
    font-size: 2em;
    font-weight: bold;
    background: linear-gradient(90deg, red, orange, yellow, green, cyan, blue, violet);
    -webkit-background-clip: text;
    color: transparent;
    margin: 10px 0;
  }

  /* 书籍列表按钮 */
  #books-list button {
    width: 90%;
    max-width: 400px;
    font-size: 1.2em;
    padding: 14px 0;
    margin: 8px 0;
    background: #0f0;
    color: #111;
    border: none;
    border-radius: 10px;
    cursor: pointer;
  }
  #books-list button:hover {
    background: #0c0;
  }

  /* 书籍介绍区 */
  #book-intro {
    display: none;
    width: 90%;
    max-width: 420px;
    background: #222;
    border: 2px solid #0f0;
    border-radius: 12px;
    padding: 20px;
    margin-top: 15px;
  }

  #book-intro p {
    font-size: 1.2em;
    line-height: 1.6;
    margin-bottom: 15px;
  }

  #book-intro button {
    width: 100%;
    padding: 12px 0;
    margin: 8px 0;
    font-size: 1.2em;
    background: #0f0;
    color: #111;
    border: none;
    border-radius: 10px;
    cursor: pointer;
  }
  #book-intro button:hover {
    background: #0c0;
  }

  /* 章节列表 */
  #chapter-list li {
    list-style: none;
    margin: 6px 0;
  }
  #chapter-list li button {
    width: 100%;
    font-size: 1.1em;
    padding: 10px 0;
    border-radius: 8px;
  }

  /* 响应式调整：小屏幕字体稍微调大 */
  @media (max-width: 420px) {
    .rainbow-text { font-size: 1.6em; }
    #books-list button { font-size: 1.1em; padding: 12px 0; }
    #book-intro p { font-size: 1.1em; }
    #book-intro button { font-size: 1.1em; padding: 10px 0; }
  }
</style>
</head>
<body>

<button id="back-btn" onclick="window.location.href='books.html'">⬅ 返回首页</button>

<h1>📚 目录</h1>
<div class="book-title-container">
    <h1 class="rainbow-text">📖 21世纪的21堂课</h1>
</div>
<div id="books-list"></div>

<!-- 书籍介绍和章节目录 -->
<div id="book-intro">
  <h2 id="book-title"></h2>
  <p id="book-description"></p>

  <audio id="introAudio"></audio>
  <button onclick="toggleAudio()">🔊 播放/暂停朗读</button>

  <ol id="chapter-list"></ol>
  <button onclick="closeIntro()">关闭介绍</button>
</div>

<script>
let audio = null;

const books = [
  {
    id: 'book1',
    title: '请点击下方章节开始阅读',
    description: `尤瓦尔·赫拉利（Yuval Noah Harari）写的社会与未来趋势书籍。 ...`,
    chapters: [
      '人工智能与工作','生物科技与未来身体','数据与隐私','网络安全与政治操控',
      '恐怖主义与安全','民主与民族主义','教育与技能培养','自由与算法决定',
      '世界秩序','意义与宗教','幸福与心理健康','教育的重要性','意识与自我认知',
      '故事与价值观','环境与气候变化','核武器与战争','移民与人口流动',
      '全球合作与治理','人工智能与不平等','人类未来的伦理','面对不确定性'
    ]
  }
];

// 渲染书籍列表
const booksListDiv = document.getElementById('books-list');
books.forEach(book=>{
  const btn = document.createElement('button');
  btn.textContent = book.title;
  btn.onclick = () => showIntro(book);
  booksListDiv.appendChild(btn);
});

// 显示书籍介绍和章节
function showIntro(book){
  document.getElementById('book-intro').style.display = 'block';
  document.getElementById('book-title').textContent = book.title;
  document.getElementById('book-description').textContent = book.description;

  const chapterList = document.getElementById('chapter-list');
  chapterList.innerHTML = '';
  book.chapters.forEach((chapter,i)=>{
    const li = document.createElement('li');
    const btn = document.createElement('button');
    btn.textContent = chapter;
    btn.onclick = ()=> goToChapter(book.id, i+1);
    li.appendChild(btn);
    chapterList.appendChild(li);
  });

  if(audio){ audio.pause(); audio = null; }
  audio = new Audio(`assets/${book.id}/zh/chapter1.mp3`);
}

function closeIntro(){
  document.getElementById('book-intro').style.display = 'none';
  if(audio){ audio.pause(); audio=null; }
}

function toggleAudio(){
  if(audio){ audio.paused ? audio.play() : audio.pause(); }
}

function goToChapter(bookId, chapterNum){
  window.location.href = `reader.html?book=${bookId}&chapter=${chapterNum}&lang=zh`;
}
</script>
</body>
</html>
